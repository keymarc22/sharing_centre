<div data-controller="ui--popover">
  <div class="popover-trigger" data-ui--popover-target="trigger" data-action="click->ui--popover#toggle">
    <% if @trigger.present? %>
      <% if @trigger.respond_to?(:call) %>
        <%= capture(&@trigger) %>
      <% else %>
        <%= @trigger.to_s.html_safe %>
      <% end %>
    <% elsif content.present? %>
      <%= content %>
    <% else %>
      <button type="button" class="<%= tw("px-2 py-1 text-sm rounded bg-gray-100") %>">Open</button>
    <% end %>
  </div>

  <div class="popover-wrapper" data-ui--popover-target="wrapper">
    <div
      data-side="bottom"
      data-controller="ui--transition"
      data-ui--popover-target="content"
      data-align="center"
      data-state="closed"
      role="dialog"
      class="<%= tw("hidden z-50 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none #{view_context.content_for(:popover_content_class)}", @options[:class]) %>"
      tabindex="-1"
    >
      <% if @items && @items.any? %>
        <ul class="<%= tw("divide-y divide-gray-100") %>">
          <% @items.each do |item| %>
            <% if item.is_a?(Hash) && (item[:path]) %>
              <a href="<%= item[:path] %>" class="<%= tw("block px-4 py-2 text-sm text-gray-700") %> <%= item[:class] %>">
                <%= it[:label] || it[:name] || it[:title] %>
              </a>
            <% else %>
              <li class="<%= tw("px-4 py-2 text-sm text-gray-700") %>">
                <%= item.to_s %>
              </li>
            <% end %>
          <% end %>
          </ul>
      <% elsif content %>
        <%= content %>
      <% end %>
    </div>
  </div>
</div>